"""
Phase 1 - Week 5: SE(3) 퀴즈
============================
강체 변환 개념 확인

사용법:
1. 먼저 문제를 읽고 직접 풀어보세요
2. 답을 확인하려면 파일 하단의 "답안" 섹션을 참고하세요
"""

import numpy as np
np.set_printoptions(precision=4, suppress=True)

print("=" * 60)
print("Phase 1 - Week 5: SE(3) 퀴즈")
print("=" * 60)

# ============================================================
# 주관식 문제
# ============================================================

print("""
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
🔢 문제 1: SE(3) 구조

4x4 SE(3) 변환 행렬 T의 각 부분이 무엇인지 답하세요.

T = [ ?  | ? ]
    [----+---]
    [ ?  | ? ]
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
""")

print("""
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
🔢 문제 2: 자유도

SE(3) 변환의 자유도는 몇 개인가?
(회전: ?, 평행이동: ?, 총합: ?)
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
""")

print("""
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
🔢 문제 3: 동차 좌표

3D 점 (2, 3, 5)를 동차 좌표로 표현하면?
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
""")

print("""
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
🔢 문제 4: 변환 합성

T1, T2가 순서대로 적용될 때, 합성 행렬은?

a) T1 @ T2
b) T2 @ T1
c) T1 + T2
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
""")

print("""
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
🔢 문제 5: 역변환

T = [R|t]의 역변환 T^(-1)의 공식은?

(R의 역변환과 t의 역변환 각각)
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
""")

print("""
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
🔢 문제 6: 좌표계 변환

월드 좌표의 점 P_w를 카메라 좌표로 변환하려면?
(T_wc: 월드 기준 카메라 포즈)
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
""")

print("""
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
🔢 문제 7: 상대 포즈

키프레임 i, j의 월드 포즈가 T_wi, T_wj일 때,
i 기준 j의 상대 포즈 T_ij는?
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
""")

print("""
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
🔢 문제 8: ROS TF2

geometry_msgs/Transform의 두 구성요소는?
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
""")

print("""
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
🔢 문제 9: 동차 좌표 장점

동차 좌표를 사용하면 어떤 장점이 있는지 2가지 답하세요.
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
""")

print("""
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
🔢 문제 10: SLAM 활용

SLAM에서 SE(3) 변환이 사용되는 예시 2가지는?
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
""")


# ============================================================
# 답안
# ============================================================







print("\n" + "=" * 60)
print("📋 답안")
print("=" * 60)

print("""
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
✅ 답 1: SE(3) 구조

T = [ R  | t ]   R: 3x3 회전 행렬
    [----+---]   t: 3x1 평행이동 벡터
    [ 0  | 1 ]   0: [0,0,0], 1: 스칼라
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
""")

print("""
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
✅ 답 2: 자유도

회전: 3 (roll, pitch, yaw)
평행이동: 3 (x, y, z)
총합: 6 DOF
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
""")

print("""
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
✅ 답 3: 동차 좌표

(2, 3, 5) → (2, 3, 5, 1)

마지막에 1을 추가
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
""")

print("""
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
✅ 답 4: 변환 합성

답: b) T2 @ T1

먼저 T1, 다음 T2 → 오른쪽에서 왼쪽으로 적용
(행렬은 오른쪽부터 작용)
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
""")

print("""
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
✅ 답 5: 역변환

T^(-1) = [ R^T  | -R^T @ t ]
         [------+----------]
         [  0   |    1     ]

- 회전 역변환: R^T (전치)
- 이동 역변환: -R^T @ t
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
""")

print("""
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
✅ 답 6: 좌표계 변환

P_c = T_cw @ P_w
    = T_wc^(-1) @ P_w

월드→카메라 변환 = 카메라 포즈의 역변환
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
""")

print("""
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
✅ 답 7: 상대 포즈

T_ij = T_wi^(-1) @ T_wj

해석: i 좌표계에서 본 j의 위치와 방향
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
""")

print("""
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
✅ 답 8: ROS TF2

1. translation (Vector3): x, y, z
2. rotation (Quaternion): x, y, z, w

주의: ROS 쿼터니언은 [x,y,z,w] 순서!
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
""")

print("""
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
✅ 답 9: 동차 좌표 장점

1. 회전+평행이동을 행렬 곱 하나로 표현
2. 연속 변환이 행렬 곱 체인으로 간단화
3. (추가) 투영도 통일된 형태로 표현
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
""")

print("""
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
✅ 답 10: SLAM 활용

1. 카메라/로봇 포즈 표현
2. 키프레임 간 상대 포즈
3. 3D 점의 좌표계 변환
4. TF2 트리 구성 (parent-child 관계)
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
""")

print("\n" + "=" * 60)
print("📊 자가 채점")
print("=" * 60)
print("""
각 문제당 10점, 총 100점

✅ 10문제 모두 맞춤: 완벽! Week 6으로 진행
✅ 7-9문제: 잘하고 있어요, 복습 후 진행
⚠️ 4-6문제: se3_basics.py 다시 공부
❌ 0-3문제: 개념 정리 필요

💡 문제 5, 7이 SLAM 핵심!
""")
