"""
Phase 1 - Week 5: ê°•ì²´ ë³€í™˜ (SE(3)) ì‹¤ìŠµ
=========================================
SE(3) ë³€í™˜ í–‰ë ¬ê³¼ ë™ì°¨ ì¢Œí‘œ ì‹¤ìŠµ

README.mdì˜ Part 1~5 ë‚´ìš©ì„ ì½”ë“œë¡œ ì‹¤ìŠµí•©ë‹ˆë‹¤:
- Part 1: SE(3) ë³€í™˜ í–‰ë ¬
- Part 2: ë™ì°¨ ì¢Œí‘œ
- Part 3: ë³€í™˜ ì—°ì‚° (í•©ì„±, ì—­ë³€í™˜)
- Part 4: ì¢Œí‘œê³„ ë³€í™˜
- Part 5: SLAM í™œìš©

í•™ìŠµ ëª©í‘œ:
1. SE(3) ë³€í™˜ í–‰ë ¬ì´ ë¬´ì—‡ì¸ì§€ ì´í•´í•œë‹¤
2. ë™ì°¨ ì¢Œí‘œê°€ ì™œ í•„ìš”í•œì§€ ì²´í—˜í•œë‹¤
3. ì—­ë³€í™˜ ê³µì‹ì´ ì–´ë–»ê²Œ ìœ ë„ë˜ëŠ”ì§€ í™•ì¸í•œë‹¤
4. ì¢Œí‘œê³„ ë³€í™˜ê³¼ ìƒëŒ€ í¬ì¦ˆë¥¼ ì§ì ‘ ê³„ì‚°í•´ë³¸ë‹¤
"""

import numpy as np
np.set_printoptions(precision=4, suppress=True)

print("=" * 60)
print("Phase 1 - Week 5: ê°•ì²´ ë³€í™˜ (SE(3)) ì‹¤ìŠµ")
print("=" * 60)

# ============================================================
# Part 1: SE(3) ë³€í™˜ í–‰ë ¬
# ============================================================
print("\n" + "=" * 60)
print("Part 1: SE(3) ë³€í™˜ í–‰ë ¬")
print("=" * 60)

print("""
ğŸ’¡ SE(3)ë€?
   - Special Euclidean Group (3D)
   - 3D ê³µê°„ì—ì„œ ê°€ëŠ¥í•œ ëª¨ë“  (íšŒì „ + í‰í–‰ì´ë™) ì¡°í•©
   - 4Ã—4 í–‰ë ¬ë¡œ í‘œí˜„: T = [R|t; 0|1]
""")

# ----- 1.1 ê¸°ë³¸ í•¨ìˆ˜ ì •ì˜ -----
def rotation_z(theta):
    """Zì¶• íšŒì „ í–‰ë ¬ ìƒì„±"""
    c, s = np.cos(theta), np.sin(theta)
    return np.array([
        [c, -s, 0],
        [s,  c, 0],
        [0,  0, 1]
    ])

def make_se3(R, t):
    """SE(3) ë³€í™˜ í–‰ë ¬ ìƒì„±
    
    T = [ R  | t ]  (4Ã—4)
        [----+---]
        [ 0  | 1 ]
    """
    T = np.eye(4)
    T[:3, :3] = R  # ì¢Œì¸¡ ìƒë‹¨: íšŒì „ í–‰ë ¬
    T[:3, 3] = t   # ìš°ì¸¡ ìƒë‹¨: í‰í–‰ì´ë™ ë²¡í„°
    return T

def decompose_se3(T):
    """SE(3)ì—ì„œ Rê³¼ t ì¶”ì¶œ"""
    R = T[:3, :3]
    t = T[:3, 3]
    return R, t

# ----- 1.2 SE(3) í–‰ë ¬ ë§Œë“¤ê¸° -----
print("\n----- 1.2 SE(3) í–‰ë ¬ ë§Œë“¤ê¸° -----")

# ì˜ˆì œ: Zì¶• 45ë„ íšŒì „ + (2, 1, 0) ì´ë™
theta = np.radians(45)
R = rotation_z(theta)
t = np.array([2, 1, 0])
T = make_se3(R, t)

print("\nâ‘  íšŒì „ í–‰ë ¬ R (Zì¶• 45ë„ íšŒì „):")
print(R)
print(f"\nâ‘¡ í‰í–‰ì´ë™ ë²¡í„° t: {t}")
print("\nâ‘¢ SE(3) ë³€í™˜ í–‰ë ¬ T:")
print(T)

print("\nğŸ’¡ Tì˜ êµ¬ì¡° í™•ì¸:")
print(f"   T[:3, :3] = R (íšŒì „ í–‰ë ¬)")
print(f"   T[:3, 3]  = t (í‰í–‰ì´ë™ ë²¡í„°)")  
print(f"   T[3, :]   = [0, 0, 0, 1] (ë™ì°¨ ì¢Œí‘œ ìœ ì§€)")

# ----- 1.3 SE(3)ì˜ ììœ ë„ -----
print("\n----- 1.3 SE(3)ì˜ ììœ ë„ (6-DOF) -----")
print("""
   ììœ ë„ = ë…ë¦½ì ì¸ ë³€ìˆ˜ì˜ ê°œìˆ˜
   
   | ìš”ì†Œ | ììœ ë„ | ì„¤ëª… |
   |------|--------|------|
   | íšŒì „ R | 3 | roll, pitch, yaw |
   | ì´ë™ t | 3 | x, y, z |
   | ì´í•©   | 6 | 6-DOF í¬ì¦ˆ |
""")

# ============================================================
# Part 2: ë™ì°¨ ì¢Œí‘œ (Homogeneous Coordinates)
# ============================================================
print("\n" + "=" * 60)
print("Part 2: ë™ì°¨ ì¢Œí‘œ")
print("=" * 60)

print("""
ğŸ’¡ ë™ì°¨ ì¢Œí‘œë€?
   - 3D ì  (x, y, z) â†’ ë™ì°¨ ì¢Œí‘œ (x, y, z, 1)
   - ë§ˆì§€ë§‰ì— 1ì„ ì¶”ê°€!
   - ì´ë ‡ê²Œ í•˜ë©´ íšŒì „+ì´ë™ì„ í–‰ë ¬ ê³± í•˜ë‚˜ë¡œ ì²˜ë¦¬ ê°€ëŠ¥
""")

def to_homogeneous(p):
    """3D ì  â†’ 4D ë™ì°¨ ì¢Œí‘œ"""
    return np.append(p, 1)

def from_homogeneous(p_h):
    """4D ë™ì°¨ ì¢Œí‘œ â†’ 3D ì """
    return p_h[:3] / p_h[3]

# ----- 2.1 ì¼ë°˜ ì¢Œí‘œ vs ë™ì°¨ ì¢Œí‘œ -----
print("\n----- 2.1 ë‘ ê°€ì§€ ë³€í™˜ ë°©ë²• ë¹„êµ -----")

p = np.array([1, 0, 0])  # í…ŒìŠ¤íŠ¸ ì 
print(f"ì›ì  p = {p}")

# ë°©ë²• 1: ì¼ë°˜ ì¢Œí‘œ (ë§ì…ˆ í•„ìš”)
p_result1 = R @ p + t
print(f"\n[ë°©ë²• 1] ì¼ë°˜ ì¢Œí‘œ: p' = R @ p + t")
print(f"         ê²°ê³¼: {p_result1}")

# ë°©ë²• 2: ë™ì°¨ ì¢Œí‘œ (í–‰ë ¬ ê³±ë§Œ!)
p_h = to_homogeneous(p)
p_h_result = T @ p_h
p_result2 = from_homogeneous(p_h_result)
print(f"\n[ë°©ë²• 2] ë™ì°¨ ì¢Œí‘œ: p' = T @ p_h")
print(f"         p_h = {p_h}")
print(f"         T @ p_h = {p_h_result}")
print(f"         ê²°ê³¼: {p_result2}")

print(f"\nâœ… ê²°ê³¼ ë™ì¼: {np.allclose(p_result1, p_result2)}")

# ----- 2.2 ë™ì°¨ ì¢Œí‘œì˜ ì¥ì  -----
print("\n----- 2.2 ë™ì°¨ ì¢Œí‘œì˜ ì¥ì  -----")
print("""
   â‘  íšŒì „ + ì´ë™ì„ í–‰ë ¬ ê³± í•˜ë‚˜ë¡œ ì²˜ë¦¬
   â‘¡ ì—°ì† ë³€í™˜ì´ í–‰ë ¬ ê³± ì²´ì¸ìœ¼ë¡œ ê°„ë‹¨í™”
   â‘¢ ì¹´ë©”ë¼ íˆ¬ì˜ë„ í–‰ë ¬ ê³±ìœ¼ë¡œ í‘œí˜„ ê°€ëŠ¥
   â‘£ ë¬´í•œì›ì (ë°©í–¥ ë²¡í„°)ì„ w=0ìœ¼ë¡œ í‘œí˜„ ê°€ëŠ¥
""")

# ============================================================
# Part 3: ë³€í™˜ ì—°ì‚°
# ============================================================
print("\n" + "=" * 60)
print("Part 3: ë³€í™˜ ì—°ì‚° (í•©ì„±ê³¼ ì—­ë³€í™˜)")
print("=" * 60)

# ----- 3.1 ë³€í™˜ í•©ì„± -----
print("\n----- 3.1 ë³€í™˜ í•©ì„± -----")

# ë³€í™˜ 1: Zì¶• 90ë„ íšŒì „ë§Œ
T1 = make_se3(rotation_z(np.radians(90)), np.array([0, 0, 0]))

# ë³€í™˜ 2: Xë°©í–¥ 2 ì´ë™ë§Œ
T2 = make_se3(np.eye(3), np.array([2, 0, 0]))

# í•©ì„±: ë¨¼ì € T1, ë‹¤ìŒ T2 ì ìš©
T_combined = T2 @ T1

print("T1: Zì¶• 90ë„ íšŒì „")
print("T2: Xë°©í–¥ 2 ì´ë™")
print("\nâš ï¸ ì£¼ì˜: ë¨¼ì € T1, ë‹¤ìŒ T2 ì ìš© = T2 @ T1")
print("        (ì˜¤ë¥¸ìª½ì—ì„œ ì™¼ìª½ìœ¼ë¡œ ì½ìŒ!)")

# í…ŒìŠ¤íŠ¸
p_test = np.array([1, 0, 0, 1])
print(f"\nì  (1, 0, 0)ì— ê° ë³€í™˜ ì ìš©:")
print(f"  T1ë§Œ ì ìš© í›„:    {(T1 @ p_test)[:3]}")
print(f"  T2 @ T1 ì ìš© í›„: {(T_combined @ p_test)[:3]}")

# ìˆœì„œê°€ ë°”ë€Œë©´ ê²°ê³¼ë„ ë‹¤ë¦„!
T_reverse = T1 @ T2
print(f"\nâœ… T2 @ T1 ê²°ê³¼: {(T_combined @ p_test)[:3]}")
print(f"âŒ T1 @ T2 ê²°ê³¼: {(T_reverse @ p_test)[:3]} (ë‹¤ë¥¸ ê²°ê³¼!)")

# ----- 3.2 ì—­ë³€í™˜ -----
print("\n----- 3.2 ì—­ë³€í™˜ -----")

def inverse_se3(T):
    """SE(3) ì—­ë³€í™˜
    
    Tâ»Â¹ = [ R^T  | -R^T @ t ]
          [------+----------]
          [  0   |    1     ]
    
    ì´ìœ :
    1. Rì˜ ì—­í–‰ë ¬ = R^T (ì§êµ í–‰ë ¬ì´ë¯€ë¡œ)
    2. tì˜ ì—­ë³€í™˜ = -R^T @ t (ë‹¨ìˆœíˆ -tê°€ ì•„ë‹˜!)
    """
    R = T[:3, :3]
    t = T[:3, 3]
    
    T_inv = np.eye(4)
    T_inv[:3, :3] = R.T           # Rì˜ transpose
    T_inv[:3, 3] = -R.T @ t       # í•µì‹¬: -R^T @ t
    return T_inv

print("""
ğŸ’¡ SE(3) ì—­ë³€í™˜ ê³µì‹:

   T = [R|t]  â†’  Tâ»Â¹ = [R^T | -R^TÂ·t]
   
   Q: ì™œ ë‹¨ìˆœíˆ -tê°€ ì•„ë‹Œê°€?
   A: ìˆœë³€í™˜ì´ "íšŒì „ í›„ ì´ë™"ì´ë¯€ë¡œ
      ì—­ë³€í™˜ì€ "ì´ë™ ì·¨ì†Œ í›„ ì—­íšŒì „"
      â†’ ì´ë™ ì·¨ì†Œë„ íšŒì „ì˜ ì˜í–¥ì„ ë°›ìŒ!
""")

print("\nì›ë³¸ T:")
print(T)

T_inv = inverse_se3(T)
print("\nTì˜ ì—­ë³€í™˜ Tâ»Â¹:")
print(T_inv)

# ê²€ì¦: T @ Tâ»Â¹ = I
identity = T @ T_inv
print("\nê²€ì¦: T @ Tâ»Â¹ (ë‹¨ìœ„í–‰ë ¬ì´ì–´ì•¼ í•¨):")
print(identity)
print(f"âœ… ë‹¨ìœ„í–‰ë ¬ ë§ìŒ: {np.allclose(identity, np.eye(4))}")

# NumPy ì—­í–‰ë ¬ê³¼ ë¹„êµ
T_inv_numpy = np.linalg.inv(T)
print(f"\nâœ… NumPy invì™€ ê²°ê³¼ ë™ì¼: {np.allclose(T_inv, T_inv_numpy)}")

# ----- 3.3 ì—­ë³€í™˜ ìƒì„¸ ì˜ˆì‹œ -----
print("\n----- 3.3 ì™œ -R^TÂ·tì¸ê°€? (êµ¬ì²´ì  ì˜ˆì‹œ) -----")

# 90ë„ Zì¶• íšŒì „ + Xë°©í–¥ 3 ì´ë™
theta_90 = np.pi / 2
R_90 = rotation_z(theta_90)
t_90 = np.array([3, 0, 0])

print(f"ì›ë³¸ ë³€í™˜: 90ë„ íšŒì „ + Xë°©í–¥ 3 ì´ë™")
print(f"  t = {t_90}")
print(f"\nì—­ë³€í™˜ì—ì„œ:")
print(f"  -t = {-t_90}")
print(f"  -R^T @ t = {-R_90.T @ t_90}")
print("""
ğŸ’¡ ê²°ê³¼ í•´ì„:
   - ë‹¨ìˆœíˆ -t í•˜ë©´: Xë°©í–¥ -3 ì´ë™
   - ì˜¬ë°”ë¥¸ -R^TÂ·t: Yë°©í–¥ -3 ì´ë™
   
   â†’ ì™œ? 90ë„ íšŒì „ëœ ì¢Œí‘œê³„ì—ì„œ XëŠ” ì›ë˜ ì¢Œí‘œê³„ì˜ Y!
""")

# ============================================================
# Part 4: ì¢Œí‘œê³„ ë³€í™˜  
# ============================================================
print("\n" + "=" * 60)
print("Part 4: ì¢Œí‘œê³„ ë³€í™˜")
print("=" * 60)

print("""
ğŸ’¡ í•µì‹¬ ê°œë…:
   - ê°™ì€ ì ì´ë¼ë„ ì¢Œí‘œê³„ì— ë”°ë¼ ì¢Œí‘œê°’ì´ ë‹¤ë¦„
   - T_ab: b ì¢Œí‘œê³„ì˜ ì ì„ a ì¢Œí‘œê³„ë¡œ ë³€í™˜
   - T_ab @ p_b = p_a (ì•„ë˜ì²¨ìê°€ ìƒì‡„ë¨!)
""")

# ----- 4.1 ì›”ë“œ â†” ì¹´ë©”ë¼ ë³€í™˜ -----
print("\n----- 4.1 ì›”ë“œ â†” ì¹´ë©”ë¼ ë³€í™˜ -----")

# ì¹´ë©”ë¼ í¬ì¦ˆ: ì›”ë“œì—ì„œ (2, 0, 0) ìœ„ì¹˜, 90ë„ ì™¼ìª½ íšŒì „
R_wc = rotation_z(np.radians(90))
t_wc = np.array([2, 0, 0])
T_wc = make_se3(R_wc, t_wc)  # ì¹´ë©”ë¼ì˜ í¬ì¦ˆ (ì›”ë“œ ê¸°ì¤€)

print("T_wc: ì¹´ë©”ë¼ í¬ì¦ˆ (ì›”ë“œ ì¢Œí‘œê³„ ê¸°ì¤€)")
print(f"  ìœ„ì¹˜: (2, 0, 0)")
print(f"  ë°©í–¥: Zì¶• 90ë„ íšŒì „ (ì™¼ìª½ì„ ë´„)")

# ì›”ë“œ â†’ ì¹´ë©”ë¼ ë³€í™˜
T_cw = inverse_se3(T_wc)  # ì—­ë³€í™˜!

print("\nT_cw = T_wcâ»Â¹: ì›”ë“œâ†’ì¹´ë©”ë¼ ë³€í™˜")

# ì›”ë“œ ì¢Œí‘œì˜ ì ì„ ì¹´ë©”ë¼ ì¢Œí‘œë¡œ
p_world = np.array([5, 0, 0, 1])
p_camera = T_cw @ p_world

print(f"\nì›”ë“œ ì¢Œí‘œ ì : {p_world[:3]}")
print(f"ì¹´ë©”ë¼ ì¢Œí‘œ ì : {p_camera[:3]}")

print("""
ğŸ’¡ ê²°ê³¼ í•´ì„:
   ì›”ë“œì—ì„œ (5, 0, 0)ì— ìˆëŠ” ì ì´
   ì¹´ë©”ë¼(90ë„ ì™¼ìª½ì„ ë´„) ì…ì¥ì—ì„œëŠ”
   ì¹´ë©”ë¼ ì•ìª½(Y ë°©í–¥)ì— ë³´ì„!
""")

# ----- 4.2 ìƒëŒ€ í¬ì¦ˆ -----  
print("\n----- 4.2 ìƒëŒ€ í¬ì¦ˆ -----")

print("""
ğŸ’¡ ìƒëŒ€ í¬ì¦ˆë€?
   - í•œ ì¢Œí‘œê³„ì—ì„œ ë³¸ ë‹¤ë¥¸ ì¢Œí‘œê³„ì˜ ìœ„ì¹˜/ë°©í–¥
   - T_ij = T_wiâ»Â¹ @ T_wj (i ê¸°ì¤€ìœ¼ë¡œ jê°€ ì–´ë””?)
   - ì•„ë˜ì²¨ì íŒ: iw @ wj = ij (wê°€ ìƒì‡„!)
""")

# í‚¤í”„ë ˆì„ 1: ì›ì 
T_w1 = make_se3(np.eye(3), np.array([0, 0, 0]))

# í‚¤í”„ë ˆì„ 2: Xë°©í–¥ 2m ì´ë™ + 30ë„ íšŒì „
T_w2 = make_se3(rotation_z(np.radians(30)), np.array([2, 0, 0]))

print("í”„ë ˆì„ 1: ì›ì , íšŒì „ ì—†ìŒ")
print("í”„ë ˆì„ 2: (2, 0, 0), Zì¶• 30ë„ íšŒì „")

# ìƒëŒ€ í¬ì¦ˆ ê³„ì‚°
T_12 = inverse_se3(T_w1) @ T_w2  # 1 ê¸°ì¤€ìœ¼ë¡œ 2ê°€ ì–´ë””?
T_21 = inverse_se3(T_w2) @ T_w1  # 2 ê¸°ì¤€ìœ¼ë¡œ 1ì´ ì–´ë””?

print(f"\nìƒëŒ€ í¬ì¦ˆ T_12 (1 â†’ 2):")
print(f"  ìƒëŒ€ ìœ„ì¹˜: {T_12[:3, 3]}")
print(f"  (í”„ë ˆì„ 1 ê¸°ì¤€ìœ¼ë¡œ, í”„ë ˆì„ 2ëŠ” Xë°©í–¥ 2, 30ë„ íšŒì „)")

print(f"\nìƒëŒ€ í¬ì¦ˆ T_21 (2 â†’ 1):")
print(f"  ìƒëŒ€ ìœ„ì¹˜: {T_21[:3, 3]}")

# ì—­ê´€ê³„ í™•ì¸
T_21_from_inv = inverse_se3(T_12)
print(f"\nâœ… T_21 = T_12â»Â¹ í™•ì¸: {np.allclose(T_21, T_21_from_inv)}")

# ============================================================
# Part 5: SLAM í™œìš©
# ============================================================
print("\n" + "=" * 60)
print("Part 5: SLAMì—ì„œì˜ í™œìš©")
print("=" * 60)

# ----- 5.1 ROS TF2 ì—°ê²° -----
print("\n----- 5.1 ROS TF2 ì—°ê²° -----")

def rotation_to_quaternion(R):
    """íšŒì „ í–‰ë ¬ â†’ ì¿¼í„°ë‹ˆì–¸ [w, x, y, z]"""
    tr = np.trace(R)
    if tr > 0:
        s = 0.5 / np.sqrt(tr + 1)
        w = 0.25 / s
        x = (R[2, 1] - R[1, 2]) * s
        y = (R[0, 2] - R[2, 0]) * s
        z = (R[1, 0] - R[0, 1]) * s
    else:
        w, x, y, z = 1, 0, 0, 0
    q = np.array([w, x, y, z])
    return q / np.linalg.norm(q)

def se3_to_ros_transform(T):
    """SE(3) â†’ ROS geometry_msgs/Transform í˜•ì‹"""
    t = T[:3, 3]
    q = rotation_to_quaternion(T[:3, :3])
    
    return {
        'translation': {'x': t[0], 'y': t[1], 'z': t[2]},
        'rotation': {'x': q[1], 'y': q[2], 'z': q[3], 'w': q[0]}  # ROSëŠ” [x,y,z,w] ìˆœì„œ!
    }

ros_tf = se3_to_ros_transform(T_w2)
print("\nT_w2ë¥¼ ROS Transform í˜•ì‹ìœ¼ë¡œ ë³€í™˜:")
print(f"  translation: x={ros_tf['translation']['x']:.2f}, "
      f"y={ros_tf['translation']['y']:.2f}, z={ros_tf['translation']['z']:.2f}")
print(f"  rotation: x={ros_tf['rotation']['x']:.4f}, "
      f"y={ros_tf['rotation']['y']:.4f}, z={ros_tf['rotation']['z']:.4f}, "
      f"w={ros_tf['rotation']['w']:.4f}")

print("""
ğŸ’¡ ROS TF2 êµ¬ì¡°:
   - translation: Vector3 (x, y, z)
   - rotation: Quaternion (x, y, z, w)
   - âš ï¸ ì£¼ì˜: ROS ì¿¼í„°ë‹ˆì–¸ì€ [x, y, z, w] ìˆœì„œ!
""")

# ============================================================
# ì •ë¦¬
# ============================================================
print("\n" + "=" * 60)
print("ğŸ“ Week 5 í•µì‹¬ ì •ë¦¬")
print("=" * 60)
print("""
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Part 1: SE(3) ë³€í™˜ í–‰ë ¬                                  â”‚
â”‚   â€¢ 4Ã—4 í–‰ë ¬: T = [R|t; 0|1]                            â”‚
â”‚   â€¢ 6 ììœ ë„ (íšŒì „ 3 + ì´ë™ 3)                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Part 2: ë™ì°¨ ì¢Œí‘œ                                        â”‚
â”‚   â€¢ (x, y, z) â†’ (x, y, z, 1)                            â”‚
â”‚   â€¢ íšŒì „+ì´ë™ì„ í–‰ë ¬ ê³± í•˜ë‚˜ë¡œ!                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Part 3: ë³€í™˜ ì—°ì‚°                                        â”‚
â”‚   â€¢ í•©ì„±: T2 @ T1 (ìˆœì„œ ì¤‘ìš”!)                          â”‚
â”‚   â€¢ ì—­ë³€í™˜: Tâ»Â¹ = [R^T | -R^TÂ·t]                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Part 4: ì¢Œí‘œê³„ ë³€í™˜                                      â”‚
â”‚   â€¢ T_ab @ p_b = p_a (ì•„ë˜ì²¨ì ìƒì‡„)                     â”‚
â”‚   â€¢ ìƒëŒ€ í¬ì¦ˆ: T_ij = T_wiâ»Â¹ @ T_wj                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Part 5: SLAM í™œìš©                                        â”‚
â”‚   â€¢ ì¹´ë©”ë¼ í¬ì¦ˆ: T_wc                                    â”‚
â”‚   â€¢ ROS TF2: translation + rotation(ì¿¼í„°ë‹ˆì–¸)           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ğŸ¯ ë‹¤ìŒ ë‹¨ê³„: se3_quiz.pyë¡œ ê°œë… í™•ì¸ â†’ Week 6: Lie êµ°/ëŒ€ìˆ˜
""")
