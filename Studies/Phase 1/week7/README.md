# Week 7: ìµœì†ŒììŠ¹ë²• (Least Squares)

## ğŸ“Œ ê°œìš”

**ìµœì†ŒììŠ¹ë²•(Least Squares)**ì€ SLAM ìµœì í™”ì˜ ê¸°ë³¸ í˜•íƒœì…ë‹ˆë‹¤. ì„¼ì„œ ì¸¡ì •ê°’ê³¼ ì˜ˆì¸¡ê°’ ì‚¬ì´ì˜ **ì˜¤ì°¨(ì”ì°¨)**ë¥¼ ìµœì†Œí™”í•˜ì—¬ ìµœì ì˜ ì¶”ì •ì¹˜ë¥¼ ì°¾ìŠµë‹ˆë‹¤. Bundle Adjustment, PnP, ì§ì„  í”¼íŒ… ë“± ê±°ì˜ ëª¨ë“  SLAM ë¬¸ì œê°€ ìµœì†ŒììŠ¹ í˜•íƒœë¡œ ì •ì˜ë©ë‹ˆë‹¤.

## ğŸ¯ í•™ìŠµ ëª©í‘œ

1. ìµœì†ŒììŠ¹ ë¬¸ì œ ì •ì˜ ì´í•´
2. ì •ê·œë°©ì •ì‹(Normal Equation) ìœ ë„
3. ë¹„ìš© í•¨ìˆ˜ì™€ ì”ì°¨ ê°œë… ì´í•´
4. NumPy/Eigenìœ¼ë¡œ ìµœì†ŒììŠ¹ í•´ êµ¬í•˜ê¸°
5. SLAMì—ì„œì˜ ìµœì†ŒììŠ¹ í™œìš©

## â±ï¸ ì˜ˆìƒ í•™ìŠµ ì‹œê°„: **5-7ì‹œê°„**

---

## ğŸ“– í•µì‹¬ ê°œë…

### 1. ìµœì†ŒììŠ¹ ë¬¸ì œ ì •ì˜

#### ì„ í˜• ì‹œìŠ¤í…œ

```
Ax = b

A: mÃ—n í–‰ë ¬ (mê°œ ë°©ì •ì‹, nê°œ ë¯¸ì§€ìˆ˜)
x: nÃ—1 ë¯¸ì§€ìˆ˜ ë²¡í„°
b: mÃ—1 ê´€ì¸¡ ë²¡í„°
```

**ê³¼ê²°ì • ì‹œìŠ¤í…œ (m > n)**: ë°©ì •ì‹ì´ ë¯¸ì§€ìˆ˜ë³´ë‹¤ ë§ìŒ â†’ ì •í™•í•œ í•´ ì—†ìŒ

#### ìµœì†ŒììŠ¹ ëª©í‘œ

```
min ||Ax - b||Â²  (ì”ì°¨ì˜ L2 ë…¸ë¦„ ì œê³± ìµœì†Œí™”)
    x
```

### 2. ì •ê·œë°©ì •ì‹ (Normal Equation)

ë¹„ìš© í•¨ìˆ˜ J(x) = ||Ax - b||Â² ë¥¼ ë¯¸ë¶„í•˜ì—¬ 0ìœ¼ë¡œ ì„¤ì •:

```
âˆ‚J/âˆ‚x = 2Aáµ€(Ax - b) = 0

ì •ê·œë°©ì •ì‹: Aáµ€Ax = Aáµ€b
ìµœì†ŒììŠ¹ í•´: x = (Aáµ€A)â»Â¹Aáµ€b
```

```python
def least_squares_normal(A, b):
    """ì •ê·œë°©ì •ì‹ìœ¼ë¡œ ìµœì†ŒììŠ¹ í•´"""
    return np.linalg.inv(A.T @ A) @ A.T @ b
```

### 3. ì”ì°¨ (Residual)

```
r = b - Ax  (ì¸¡ì •ê°’ - ì˜ˆì¸¡ê°’)
ë¹„ìš© = ||r||Â² = Î£ ráµ¢Â²
```

---

## ğŸ”§ ì‹¤ìŠµ: ì§ì„  í”¼íŒ…

```python
# ë°ì´í„°: y = 2x + 1 + ë…¸ì´ì¦ˆ
x_data = np.array([1, 2, 3, 4, 5])
y_data = np.array([3.1, 4.9, 7.2, 8.8, 11.1])

# ì„¤ê³„ í–‰ë ¬ A: [1, x] í˜•íƒœ
A = np.column_stack([np.ones(5), x_data])
b = y_data

# ìµœì†ŒììŠ¹ í•´: [ì ˆí¸, ê¸°ìš¸ê¸°]
params = np.linalg.lstsq(A, b, rcond=None)[0]
# ê²°ê³¼: [0.98, 2.02] â‰ˆ [1, 2]
```

---

## ğŸ¤– SLAMì—ì„œì˜ í™œìš©

| ë¬¸ì œ | í˜•íƒœ | ì„¤ëª… |
|------|------|------|
| **PnP** | Ax = b | 3D-2D ëŒ€ì‘ì—ì„œ í¬ì¦ˆ ì¶”ì • |
| **Triangulation** | Ax = 0 | 2D-2Dì—ì„œ 3D ì  ë³µì› |
| **Bundle Adjustment** | ëŒ€ê·œëª¨ ìµœì†ŒììŠ¹ | í¬ì¦ˆ + 3Dì  ë™ì‹œ ìµœì í™” |
| **ì¬íˆ¬ì˜ ì˜¤ì°¨** | ||f(x) - z||Â² | ë¹„ì„ í˜• ìµœì†ŒììŠ¹ |

---

## ğŸ’» ì‹¤ìŠµ íŒŒì¼

| íŒŒì¼ | ë‚´ìš© |
|------|------|
| `least_squares_basics.py` | ì •ê·œë°©ì •ì‹, ì§ì„  í”¼íŒ… |
| `least_squares_quiz.py` | ê°œë… í€´ì¦ˆ |

---

## âœ… ì²´í¬ë¦¬ìŠ¤íŠ¸

- [ ] ìµœì†ŒììŠ¹ ë¬¸ì œ ì •ì˜ ê°€ëŠ¥
- [ ] ì •ê·œë°©ì •ì‹ ìœ ë„ ì´í•´
- [ ] ì”ì°¨ì˜ ì˜ë¯¸ ì´í•´
- [ ] NumPy lstsq ì‚¬ìš© ê°€ëŠ¥

---

## ğŸ”— ë‹¤ìŒ: Week 8 ë¹„ì„ í˜• ìµœì í™” (Gauss-Newton, LM, Ceres)
