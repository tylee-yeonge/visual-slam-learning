"""
Phase 1 - Week 2: 선형대수 퀴즈
================================
NumPy를 활용한 선형대수 주관식 퀴즈

사용법:
1. 먼저 문제를 읽고 직접 코드를 작성해보세요
2. 답을 확인하려면 파일 하단의 "답안" 섹션을 참고하세요
"""

import numpy as np
np.set_printoptions(precision=4, suppress=True)

print("=" * 60)
print("Phase 1 - Week 2: 선형대수 퀴즈")
print("=" * 60)

# ============================================================
# 주관식 문제
# ============================================================

print("\n" + "=" * 60)
print("📝 주관식 문제")
print("=" * 60)

# ----------------------------------------------------------
# 문제 1: 행렬 곱셈
# ----------------------------------------------------------
print("""
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
🔢 문제 1: 행렬 곱셈

다음 두 행렬의 곱 A @ B를 직접 손으로 계산하세요.
""")

A1 = np.array([
    [1, 2],
    [3, 4]
])
B1 = np.array([
    [5, 6],
    [7, 8]
])

print("A =")
print(A1)
print("\nB =")
print(B1)
print("\n질문: A @ B = ?")
print("━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━")

# ----------------------------------------------------------
# 문제 2: 역행렬
# ----------------------------------------------------------
print("""
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
🔢 문제 2: 역행렬

다음 2x2 행렬의 역행렬을 구하세요.
(힌트: 2x2 역행렬 공식: 1/(ad-bc) * [[d, -b], [-c, a]])
""")

M2 = np.array([
    [3, 1],
    [2, 1]
])

print("M =")
print(M2)
print("\n질문: M의 역행렬 M^(-1) = ?")
print("━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━")

# ----------------------------------------------------------
# 문제 3: 행렬식
# ----------------------------------------------------------
print("""
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
🔢 문제 3: 행렬식

다음 행렬의 행렬식(determinant)을 계산하세요.
(힌트: 2x2 행렬 [[a,b],[c,d]]의 det = ad - bc)
""")

D3 = np.array([
    [4, 6],
    [3, 8]
])

print("D =")
print(D3)
print("\n질문: det(D) = ?")
print("━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━")

# ----------------------------------------------------------
# 문제 4: 고유값
# ----------------------------------------------------------
print("""
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
🔢 문제 4: 고유값

다음 대각 행렬의 고유값을 구하세요.
(힌트: 대각 행렬의 고유값은 무엇일까요?)
""")

P4 = np.array([
    [5, 0],
    [0, 3]
])

print("P =")
print(P4)
print("\n질문: P의 고유값들은?")
print("━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━")

# ----------------------------------------------------------
# 문제 5: 회전 행렬 성질
# ----------------------------------------------------------
print("""
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
🔢 문제 5: 회전 행렬 성질

45도 회전 행렬 R이 주어졌을 때:
""")

theta = np.radians(45)
R5 = np.array([
    [np.cos(theta), -np.sin(theta)],
    [np.sin(theta), np.cos(theta)]
])

print("R =")
print(R5)
print("""
질문 5-1: R^T @ R = ?
질문 5-2: det(R) = ?
질문 5-3: R의 역행렬은 무엇과 같은가?
""")
print("━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━")

# ----------------------------------------------------------
# 문제 6: 고유벡터
# ----------------------------------------------------------
print("""
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
🔢 문제 6: 고유벡터 검증

v = [1, 1]이 행렬 A의 고유벡터인지 확인하세요.
""")

A6 = np.array([
    [2, 1],
    [1, 2]
])
v6 = np.array([1, 1])

print("A =")
print(A6)
print(f"\nv = {v6}")
print("\n질문: A @ v = ? (λ * v 형태로 나오면 고유벡터)")
print("━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━")

# ----------------------------------------------------------
# 문제 7: SLAM 응용 - 회전 행렬
# ----------------------------------------------------------
print("""
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
🔢 문제 7: SLAM 응용 - 회전 행렬

3D에서 Z축을 기준으로 90도 회전하는 행렬 Rz(90°)를 작성하세요.

힌트: Rz(θ) = [[cos(θ), -sin(θ), 0],
               [sin(θ),  cos(θ), 0],
               [0,       0,       1]]
               
질문: Rz(90°) = ?
""")
print("━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━")

# ----------------------------------------------------------
# 문제 8: 공분산 행렬 해석
# ----------------------------------------------------------
print("""
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
🔢 문제 8: 공분산 행렬 해석

로봇 위치 추정의 공분산 행렬이 다음과 같습니다:
""")

cov8 = np.array([
    [0.04, 0.0],
    [0.0, 0.25]
])

print("P =")
print(cov8)
print("""
질문 8-1: x방향 표준편차는?
질문 8-2: y방향 표준편차는?
질문 8-3: 어느 방향의 불확실성이 더 큰가?
""")
print("━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━")

# ----------------------------------------------------------
# 문제 9: 직교 행렬 판별
# ----------------------------------------------------------
print("""
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
🔢 문제 9: 직교 행렬 판별

다음 행렬이 직교 행렬인지 판별하세요.
(힌트: 직교 행렬이면 R^T @ R = I)
""")

Q9 = np.array([
    [1, 0],
    [0, -1]
])

print("Q =")
print(Q9)
print("\n질문: Q는 직교 행렬인가? (True/False)")
print("━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━")

# ----------------------------------------------------------
# 문제 10: 행렬의 기하학적 의미
# ----------------------------------------------------------
print("""
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
🔢 문제 10: 행렬의 기하학적 변환

다음 행렬이 벡터 [1, 0]을 어디로 변환하는지 계산하세요.
""")

T10 = np.array([
    [2, 0],
    [0, 3]
])
v10 = np.array([1, 0])

print("T =")
print(T10)
print(f"\nv = {v10}")
print("\n질문: T @ v = ?")
print("━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━")


# ============================================================
# ============================================================
#
#                    📋 답안 (아래로 스크롤)
#
# ============================================================
# ============================================================



























print("\n" + "=" * 60)
print("📋 답안")
print("=" * 60)

# ----------------------------------------------------------
# 답 1: 행렬 곱셈
# ----------------------------------------------------------
print("""
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
✅ 답 1: 행렬 곱셈
""")
answer1 = A1 @ B1
print("A @ B =")
print(answer1)
print("""
풀이:
- (1,1) = 1*5 + 2*7 = 5 + 14 = 19
- (1,2) = 1*6 + 2*8 = 6 + 16 = 22
- (2,1) = 3*5 + 4*7 = 15 + 28 = 43
- (2,2) = 3*6 + 4*8 = 18 + 32 = 50
""")
print("━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━")

# ----------------------------------------------------------
# 답 2: 역행렬
# ----------------------------------------------------------
print("""
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
✅ 답 2: 역행렬
""")
answer2 = np.linalg.inv(M2)
print("M^(-1) =")
print(answer2)
print("""
풀이:
- det(M) = 3*1 - 1*2 = 1
- M^(-1) = 1/1 * [[1, -1], [-2, 3]] = [[1, -1], [-2, 3]]
""")
print("━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━")

# ----------------------------------------------------------
# 답 3: 행렬식
# ----------------------------------------------------------
print("""
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
✅ 답 3: 행렬식
""")
answer3 = np.linalg.det(D3)
print(f"det(D) = {answer3:.0f}")
print("""
풀이:
- det(D) = 4*8 - 6*3 = 32 - 18 = 14
""")
print("━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━")

# ----------------------------------------------------------
# 답 4: 고유값
# ----------------------------------------------------------
print("""
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
✅ 답 4: 고유값
""")
answer4 = np.linalg.eigvals(P4)
print(f"고유값: {answer4}")
print("""
풀이:
- 대각 행렬의 고유값 = 대각 원소들
- 따라서 고유값은 5와 3
""")
print("━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━")

# ----------------------------------------------------------
# 답 5: 회전 행렬 성질
# ----------------------------------------------------------
print("""
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
✅ 답 5: 회전 행렬 성질
""")
print("답 5-1: R^T @ R =")
print(R5.T @ R5)
print(f"\n답 5-2: det(R) = {np.linalg.det(R5):.4f}")
print("\n답 5-3: R의 역행렬 = R의 전치행렬 (R^T)")
print("""
설명:
- 회전 행렬은 직교 행렬이므로 R^T @ R = I (단위행렬)
- 회전은 크기를 보존하므로 det(R) = 1
- 직교 행렬의 역행렬은 전치행렬과 같음
""")
print("━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━")

# ----------------------------------------------------------
# 답 6: 고유벡터
# ----------------------------------------------------------
print("""
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
✅ 답 6: 고유벡터 검증
""")
answer6 = A6 @ v6
print(f"A @ v = {answer6}")
print(f"\n해석: A @ v = {answer6[0]} * [1, 1] = 3 * v")
print("""
결론: v = [1, 1]은 A의 고유벡터이고, 대응하는 고유값은 3
""")
print("━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━")

# ----------------------------------------------------------
# 답 7: SLAM 응용 - 회전 행렬
# ----------------------------------------------------------
print("""
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
✅ 답 7: SLAM 응용 - 회전 행렬
""")
theta7 = np.radians(90)
Rz90 = np.array([
    [np.cos(theta7), -np.sin(theta7), 0],
    [np.sin(theta7), np.cos(theta7), 0],
    [0, 0, 1]
])
print("Rz(90°) =")
print(Rz90)
print("""
설명:
- cos(90°) = 0, sin(90°) = 1
- Rz(90°) = [[0, -1, 0], [1, 0, 0], [0, 0, 1]]
- 이 행렬은 점을 Z축 기준으로 90도 반시계방향 회전
""")
print("━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━")

# ----------------------------------------------------------
# 답 8: 공분산 행렬 해석
# ----------------------------------------------------------
print("""
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
✅ 답 8: 공분산 행렬 해석
""")
std_x = np.sqrt(cov8[0, 0])
std_y = np.sqrt(cov8[1, 1])
print(f"답 8-1: x방향 표준편차 = sqrt(0.04) = {std_x}")
print(f"답 8-2: y방향 표준편차 = sqrt(0.25) = {std_y}")
print(f"답 8-3: y방향 불확실성이 더 큼 (0.5 > 0.2)")
print("""
해석:
- 공분산 행렬의 대각 원소 = 각 축의 분산
- 표준편차 = sqrt(분산)
- y방향 분산이 더 크므로 y방향 불확실성이 더 큼
""")
print("━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━")

# ----------------------------------------------------------
# 답 9: 직교 행렬 판별
# ----------------------------------------------------------
print("""
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
✅ 답 9: 직교 행렬 판별
""")
QtQ = Q9.T @ Q9
print("Q^T @ Q =")
print(QtQ)
is_orthogonal = np.allclose(QtQ, np.eye(2))
print(f"\n답: Q는 직교 행렬인가? {is_orthogonal}")
print("""
설명:
- Q^T @ Q = I (단위행렬) 이므로 직교 행렬
- det(Q) = -1 이므로 반사(reflection) 포함
- (순수 회전은 det = 1)
""")
print("━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━")

# ----------------------------------------------------------
# 답 10: 행렬의 기하학적 의미
# ----------------------------------------------------------
print("""
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
✅ 답 10: 행렬의 기하학적 변환
""")
answer10 = T10 @ v10
print(f"T @ v = {answer10}")
print("""
설명:
- T = [[2, 0], [0, 3]] 는 스케일링 행렬
- x방향으로 2배, y방향으로 3배 확대
- [1, 0] → [2, 0] (x성분만 2배)
""")
print("━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━")

# ============================================================
# 점수 확인
# ============================================================
print("\n" + "=" * 60)
print("📊 자가 채점")
print("=" * 60)
print("""
각 문제당 10점, 총 100점

✅ 10문제 모두 맞춤: 완벽! Week 3으로 진행
✅ 7-9문제: 잘하고 있어요, 틀린 부분 복습 후 진행
⚠️ 4-6문제: 3Blue1Brown 영상 다시 시청 권장
❌ 0-3문제: Week 1부터 다시 복습 필요

💡 SLAM 관련 문제 (5, 7, 8)가 중요합니다!
""")
